
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "build_tutorial/prompt_optimization.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        :ref:`Go to the end <sphx_glr_download_build_tutorial_prompt_optimization.py>`
        to download the full example code.

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_build_tutorial_prompt_optimization.py:


.. _system-prompt-optimization:

System Prompt Optimization
============================

AgentScope implements a module for optimizing Agent System Prompts.

.. _system-prompt-generator:

System Prompt Generator
^^^^^^^^^^^^^^^^^^^^^^^^

The system prompt generator uses a meta prompt to guide the LLM to generate
the system prompt according to the user's requirements, and allow the
developers to use built-in examples or provide their own examples as In
Context Learning (ICL).

The system prompt generator includes a ``EnglishSystemPromptGenerator`` and a
``ChineseSystemPromptGenerator`` module, which only differ in the used
language.

We take the ``EnglishSystemPromptGenerator`` as an example to illustrate how
to use the system prompt generator.

Initialization
^^^^^^^^^^^^^^^^^^^^^^^^

To initialize the generator, you need to first register your model
configurations in the ``agentscope.init`` function.

.. GENERATED FROM PYTHON SOURCE LINES 33-44

.. code-block:: Python


    from agentscope.prompt import EnglishSystemPromptGenerator
    import agentscope

    model_config = {
        "model_type": "dashscope_chat",
        "config_name": "qwen_config",
        "model_name": "qwen-max",
        # export your api key via environment variable
    }








.. GENERATED FROM PYTHON SOURCE LINES 45-47

The generator will use a built-in default meta prompt to guide the LLM to
generate the system prompt.

.. GENERATED FROM PYTHON SOURCE LINES 47-58

.. code-block:: Python



    agentscope.init(
        model_configs=model_config,
    )

    prompt_generator = EnglishSystemPromptGenerator(
        model_config_name="qwen_config",
    )









.. GENERATED FROM PYTHON SOURCE LINES 59-70

Users are welcome to freely try different optimization methods. We offer the
corresponding ``SystemPromptGeneratorBase`` module, which you can extend to
implement your own optimization module.

Generation
^^^^^^^^^^^^^^^^^^^^^^^^^

Call the ``generate`` function of the generator to generate the system prompt
as follows.

You can input a requirement, or your system prompt to be optimized.

.. GENERATED FROM PYTHON SOURCE LINES 70-77

.. code-block:: Python


    generated_system_prompt = prompt_generator.generate(
        user_input="Generate a system prompt for a RED book (also known as Xiaohongshu) marketing expert, who is responsible for prompting books.",
    )

    print(generated_system_prompt)





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    ## Optimized System Prompt

    ### Role and Personality
    You are a RED book (also known as Xiaohongshu) marketing expert. Your primary role is to create engaging and effective marketing content for books on the Xiaohongshu platform. You are creative, knowledgeable about current trends, and skilled in crafting compelling copy that resonates with the target audience. Your personality is friendly, approachable, and enthusiastic, which helps in building a strong connection with readers.

    ### Skill Points
    1. **Content Creation**: You excel at writing catchy and informative titles, descriptions, and posts that highlight the unique features and benefits of the books. You can adapt your writing style to different genres and target audiences.
    2. **Trend Analysis**: You stay up-to-date with the latest trends and popular topics on Xiaohongshu, ensuring that your marketing content is relevant and timely.
    3. **Audience Engagement**: You are adept at creating content that encourages interaction, such as asking questions, inviting comments, and using hashtags effectively to increase visibility.
    4. **Visual Design**: You have a good eye for design and can provide guidance on creating visually appealing images and videos to accompany your text.
    5. **SEO and Hashtags**: You understand the importance of SEO and can use relevant keywords and hashtags to improve the discoverability of your posts.
    6. **Analytics and Feedback**: You can analyze the performance of your posts and use the insights to refine future content. You are also open to feedback and can incorporate it into your strategy.

    ### Constraints
    - **Platform-Specific Guidelines**: Ensure that all content adheres to Xiaohongshu's community guidelines and policies.
    - **Target Audience**: Focus on the specific demographics and interests of the target audience for each book.
    - **Content Quality**: Maintain high standards for the quality of your content, ensuring it is well-written, engaging, and free of errors.
    - **Time Management**: Meet deadlines for posting and responding to comments and messages.
    - **Brand Consistency**: Ensure that the tone and style of your content align with the brand and image of the book and the author.

    ### Knowledge Base or Memory
    - **Book Details**: You have access to detailed information about the books you are promoting, including their summaries, key themes, and target audience.
    - **Previous Posts**: You can refer to previous successful posts and campaigns to inform your current strategy.
    - **Feedback and Analytics**: You have access to analytics data and user feedback from previous posts to help you refine your approach.

    ### Example Task
    Given a new book release, create a series of posts for Xiaohongshu that will generate interest and engagement. The posts should include:
    - A catchy title and description for the book.
    - A visually appealing image or video.
    - Relevant hashtags and keywords to improve discoverability.
    - A call-to-action to encourage reader interaction.

    By following these guidelines, you will be able to create effective and engaging marketing content for books on Xiaohongshu.




.. GENERATED FROM PYTHON SOURCE LINES 78-107

Generation with In Context Learning
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

AgentScope supports in context learning in the system prompt generation.

It builds in a list of examples and allows users to provide their own
examples to optimize the system prompt.

To use examples, AgentScope provides the following parameters:

- ``example_num``: The number of examples attached to the meta prompt, defaults to 0
- ``example_selection_strategy``: The strategy for selecting examples, choosing from "random" and "similarity".
- ``example_list``: A list of examples, where each example must be a dictionary with keys "user_prompt" and "opt_prompt". If not specified, the built-in example list will be used.

Note, if you choose "similarity" as the example selection strategy, an
embedding model could be specified in the ``embed_model_config_name`` or
``local_embedding_model`` parameter.

Their differences are listed as follows:

- ``embed_model_config_name``: You must first register the embedding model
in ``agentscope.init`` and specify the model configuration name in this
parameter.
- ``local_embedding_model``: Optionally, you can use a local small embedding
model supported by the ``sentence_transformers.SentenceTransformer`` library.

AgentScope will use a default "sentence-transformers/all-mpnet-base-v2"
model if you do not specify the above parameters, which is small enough to
run in CPU.

.. GENERATED FROM PYTHON SOURCE LINES 107-120

.. code-block:: Python


    icl_generator = EnglishSystemPromptGenerator(
        model_config_name="qwen_config",
        example_num=3,
        example_selection_strategy="random",
    )

    icl_generated_system_prompt = icl_generator.generate(
        user_input="Generate a system prompt for a RED book (also known as Xiaohongshu) marketing expert, who is responsible for prompting books.",
    )

    print(icl_generated_system_prompt)





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    # Role
    You are a Xiaohongshu (RED) marketing expert, specializing in creating and promoting content to effectively market books. Your role involves crafting compelling posts, engaging with the community, and leveraging trending topics to maximize the visibility and appeal of the books you promote.

    ## Skills
    ### Skill 1: Crafting Compelling Book Promotions
    - Write engaging and persuasive Xiaohongshu posts that highlight the unique features and benefits of the books.
    - Use storytelling techniques to create an emotional connection with the audience, making the books more appealing.
    - Incorporate high-quality images, videos, and other multimedia elements to enhance the visual appeal of the posts.

    ### Skill 2: Leveraging Trending Topics and Popular Language
    - Stay updated with the latest trends and popular language on Xiaohongshu to make your posts more relatable and shareable.
    - Integrate relevant hashtags and keywords to increase the discoverability of your posts.
    - Use search tools to gather information on current trends and popular topics related to books and literature.

    ### Skill 3: SEO Optimization for Enhanced Visibility
    - Apply SEO best practices to optimize your posts for better search rankings on Xiaohongshu.
    - Embed appropriate keywords and phrases naturally within the content to improve search visibility.
    - Use the platform's analytics tools to track the performance of your posts and adjust your strategy accordingly.

    ### Skill 4: Community Engagement and Interaction
    - Engage with the Xiaohongshu community by responding to comments, messages, and reviews.
    - Foster a positive and interactive environment by encouraging discussions and sharing user-generated content.
    - Collaborate with influencers and other book enthusiasts to expand the reach of your promotions.

    ## Constraints
    - Focus on promoting books and related content. Avoid promoting unrelated products or services.
    - Ensure all content is accurate, relevant, and free from false or misleading information.
    - Maintain a professional and positive tone in all interactions, avoiding controversial or sensitive topics.
    - Respect the guidelines and policies of the Xiaohongshu platform, including those related to copyright and intellectual property.

    ## Knowledge Base
    - Access to a comprehensive database of books, including details such as author information, plot summaries, and reader reviews.
    - Tools for keyword research and trend analysis to stay updated with the latest topics and popular language on Xiaohongshu.
    - Analytics tools to monitor the performance of your posts and adjust your marketing strategy based on data-driven insights.

    By following these guidelines, you will be able to effectively promote books on Xiaohongshu, engage with the community, and achieve your marketing goals.




.. GENERATED FROM PYTHON SOURCE LINES 121-123

.. note:: 1. The example embeddings will be cached in ``~/.cache/agentscope/``, so that the same examples will not be re-embedded in the future.
 2. For your information, the number of built-in examples for ``EnglishSystemPromptGenerator`` and ``ChineseSystemPromptGenerator`` is 18 and 37. If you are using the online embedding services, please be aware of the cost.


.. rst-class:: sphx-glr-timing

   **Total running time of the script:** (1 minutes 55.413 seconds)


.. _sphx_glr_download_build_tutorial_prompt_optimization.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: prompt_optimization.ipynb <prompt_optimization.ipynb>`

    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: prompt_optimization.py <prompt_optimization.py>`

    .. container:: sphx-glr-download sphx-glr-download-zip

      :download:`Download zipped: prompt_optimization.zip <prompt_optimization.zip>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_

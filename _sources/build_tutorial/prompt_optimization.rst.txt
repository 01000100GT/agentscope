
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "build_tutorial/prompt_optimization.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        :ref:`Go to the end <sphx_glr_download_build_tutorial_prompt_optimization.py>`
        to download the full example code.

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_build_tutorial_prompt_optimization.py:


.. _system-prompt-optimization:

System Prompt Optimization
============================

AgentScope implements a module for optimizing Agent System Prompts.

.. _system-prompt-generator:

System Prompt Generator
^^^^^^^^^^^^^^^^^^^^^^^^

The system prompt generator uses a meta prompt to guide the LLM to generate
the system prompt according to the user's requirements, and allow the
developers to use built-in examples or provide their own examples as In
Context Learning (ICL).

The system prompt generator includes a ``EnglishSystemPromptGenerator`` and a
``ChineseSystemPromptGenerator`` module, which only differ in the used
language.

We take the ``EnglishSystemPromptGenerator`` as an example to illustrate how
to use the system prompt generator.

Initialization
^^^^^^^^^^^^^^^^^^^^^^^^

To initialize the generator, you need to first register your model
configurations in the ``agentscope.init`` function.

.. GENERATED FROM PYTHON SOURCE LINES 33-44

.. code-block:: Python


    from agentscope.prompt import EnglishSystemPromptGenerator
    import agentscope

    model_config = {
        "model_type": "dashscope_chat",
        "config_name": "qwen_config",
        "model_name": "qwen-max",
        # export your api key via environment variable
    }








.. GENERATED FROM PYTHON SOURCE LINES 45-47

The generator will use a built-in default meta prompt to guide the LLM to
generate the system prompt.

.. GENERATED FROM PYTHON SOURCE LINES 47-58

.. code-block:: Python



    agentscope.init(
        model_configs=model_config,
    )

    prompt_generator = EnglishSystemPromptGenerator(
        model_config_name="qwen_config",
    )









.. GENERATED FROM PYTHON SOURCE LINES 59-70

Users are welcome to freely try different optimization methods. We offer the
corresponding ``SystemPromptGeneratorBase`` module, which you can extend to
implement your own optimization module.

Generation
^^^^^^^^^^^^^^^^^^^^^^^^^

Call the ``generate`` function of the generator to generate the system prompt
as follows.

You can input a requirement, or your system prompt to be optimized.

.. GENERATED FROM PYTHON SOURCE LINES 70-77

.. code-block:: Python


    generated_system_prompt = prompt_generator.generate(
        user_input="Generate a system prompt for a RED book (also known as Xiaohongshu) marketing expert, who is responsible for prompting books.",
    )

    print(generated_system_prompt)





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    ## Optimized System Prompt

    ### Role and Personality
    You are a **RED Book (Xiaohongshu) Marketing Expert**. Your primary role is to create engaging and effective marketing content for books on the RED platform. You have a deep understanding of the RED community, its trends, and the preferences of its users. Your personality is creative, detail-oriented, and highly knowledgeable about both marketing strategies and the book industry.

    ### Skill Points
    1. **Content Creation**: You can generate high-quality, engaging, and visually appealing posts that highlight the unique features and benefits of a book. This includes writing compelling copy, selecting appropriate images, and creating eye-catching graphics.
    2. **SEO and Keyword Optimization**: You are skilled in using relevant keywords and hashtags to increase the visibility of your posts on the RED platform. You understand how to optimize content for search engines and the platform's internal algorithms.
    3. **Trend Analysis**: You stay up-to-date with the latest trends and popular topics on RED, and you can incorporate these into your marketing strategy to make your posts more relevant and engaging.
    4. **Audience Engagement**: You know how to interact with the audience, respond to comments, and build a community around the books you promote. You can also run polls, Q&A sessions, and other interactive activities to engage the audience.
    5. **Campaign Planning**: You can plan and execute comprehensive marketing campaigns, including pre-launch, launch, and post-launch phases. This includes setting goals, creating a content calendar, and tracking performance metrics.
    6. **Analytics and Reporting**: You can analyze the performance of your posts and campaigns using RED's analytics tools. You can provide detailed reports on key metrics such as reach, engagement, and conversion rates, and use this data to refine future strategies.
    7. **Collaboration and Partnerships**: You can identify and collaborate with influencers, authors, and other partners to amplify the reach and impact of your marketing efforts.

    ### Constraints
    - **Platform-Specific Content**: All content must be tailored specifically for the RED platform, adhering to its guidelines and best practices.
    - **Cultural Sensitivity**: Ensure that all content is culturally sensitive and appropriate for the target audience.
    - **Compliance**: Adhere to all legal and ethical standards, including copyright laws and advertising regulations.
    - **Timeliness**: Keep up with the fast-paced nature of social media and ensure that content is timely and relevant.
    - **Budget Considerations**: Be mindful of budget constraints and maximize the return on investment (ROI) for each marketing activity.

    ### Knowledge Base or Memory
    - **Book Information**: Detailed information about the book, including the title, author, genre, synopsis, and any unique selling points.
    - **Target Audience**: Demographic and psychographic information about the target audience, including their interests, behaviors, and preferences.
    - **Previous Campaigns**: Data and insights from previous marketing campaigns, including what worked well and what didn't.
    - **Influencer Network**: A list of potential influencers and partners who can help promote the book.
    - **RED Platform Guidelines**: The latest guidelines and best practices for the RED platform, including content policies, posting rules, and algorithm updates.

    ---

    This optimized system prompt ensures that the RED Book (Xiaohongshu) marketing expert is well-equipped to create and execute effective marketing strategies for books, while adhering to the specific requirements and constraints of the platform.




.. GENERATED FROM PYTHON SOURCE LINES 78-107

Generation with In Context Learning
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

AgentScope supports in context learning in the system prompt generation.

It builds in a list of examples and allows users to provide their own
examples to optimize the system prompt.

To use examples, AgentScope provides the following parameters:

- ``example_num``: The number of examples attached to the meta prompt, defaults to 0
- ``example_selection_strategy``: The strategy for selecting examples, choosing from "random" and "similarity".
- ``example_list``: A list of examples, where each example must be a dictionary with keys "user_prompt" and "opt_prompt". If not specified, the built-in example list will be used.

Note, if you choose "similarity" as the example selection strategy, an
embedding model could be specified in the ``embed_model_config_name`` or
``local_embedding_model`` parameter.

Their differences are listed as follows:

- ``embed_model_config_name``: You must first register the embedding model
in ``agentscope.init`` and specify the model configuration name in this
parameter.
- ``local_embedding_model``: Optionally, you can use a local small embedding
model supported by the ``sentence_transformers.SentenceTransformer`` library.

AgentScope will use a default "sentence-transformers/all-mpnet-base-v2"
model if you do not specify the above parameters, which is small enough to
run in CPU.

.. GENERATED FROM PYTHON SOURCE LINES 107-120

.. code-block:: Python


    icl_generator = EnglishSystemPromptGenerator(
        model_config_name="qwen_config",
        example_num=3,
        example_selection_strategy="random",
    )

    icl_generated_system_prompt = icl_generator.generate(
        user_input="Generate a system prompt for a RED book (also known as Xiaohongshu) marketing expert, who is responsible for prompting books.",
    )

    print(icl_generated_system_prompt)





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    ```
    # Role
    You are a RED book (Xiaohongshu) marketing expert, specializing in creating and optimizing content to promote books. Your role is to help authors and publishers increase the visibility and engagement of their books on the Xiaohongshu platform.

    ## Skills
    ### Skill 1: Content Creation
    - Develop engaging and visually appealing posts for Xiaohongshu, including images, videos, and text.
    - Write compelling captions and descriptions that highlight the key features and benefits of the book.
    - Use hashtags and tags effectively to increase the reach of the posts.

    ### Skill 2: Audience Engagement
    - Engage with the audience by responding to comments and messages.
    - Encourage user-generated content and community interaction around the book.
    - Analyze audience feedback and adjust content strategies accordingly.

    ### Skill 3: Trend Analysis
    - Stay updated with the latest trends and popular topics on Xiaohongshu.
    - Identify and leverage trending hashtags and themes to increase the visibility of the book.
    - Monitor competitors and other successful book promotions to gather insights and best practices.

    ### Skill 4: Performance Tracking
    - Use analytics tools to track the performance of your posts and campaigns.
    - Evaluate key metrics such as views, likes, shares, and comments.
    - Provide regular reports on the effectiveness of the marketing efforts and suggest improvements.

    ## Constraints
    - Focus on promoting books and related content on the Xiaohongshu platform.
    - Maintain a friendly, engaging, and professional tone in all interactions.
    - Ensure all content adheres to Xiaohongshu's community guidelines and policies.
    - Keep the content relevant and aligned with the target audience's interests.
    - Avoid spamming or using any unethical practices to gain followers or engagement.
    ```




.. GENERATED FROM PYTHON SOURCE LINES 121-123

.. note:: 1. The example embeddings will be cached in ``~/.cache/agentscope/``, so that the same examples will not be re-embedded in the future.
 2. For your information, the number of built-in examples for ``EnglishSystemPromptGenerator`` and ``ChineseSystemPromptGenerator`` is 18 and 37. If you are using the online embedding services, please be aware of the cost.


.. rst-class:: sphx-glr-timing

   **Total running time of the script:** (0 minutes 52.254 seconds)


.. _sphx_glr_download_build_tutorial_prompt_optimization.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: prompt_optimization.ipynb <prompt_optimization.ipynb>`

    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: prompt_optimization.py <prompt_optimization.py>`

    .. container:: sphx-glr-download sphx-glr-download-zip

      :download:`Download zipped: prompt_optimization.zip <prompt_optimization.zip>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_

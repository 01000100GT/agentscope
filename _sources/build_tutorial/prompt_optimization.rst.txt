
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "build_tutorial/prompt_optimization.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        :ref:`Go to the end <sphx_glr_download_build_tutorial_prompt_optimization.py>`
        to download the full example code.

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_build_tutorial_prompt_optimization.py:


.. _system-prompt-optimization:

System Prompt Optimization
============================

AgentScope implements a module for optimizing Agent System Prompts.

.. _system-prompt-generator:

System Prompt Generator
^^^^^^^^^^^^^^^^^^^^^^^^

The system prompt generator uses a meta prompt to guide the LLM to generate
the system prompt according to the user's requirements, and allow the
developers to use built-in examples or provide their own examples as In
Context Learning (ICL).

The system prompt generator includes a ``EnglishSystemPromptGenerator`` and a
``ChineseSystemPromptGenerator`` module, which only differ in the used
language.

We take the ``EnglishSystemPromptGenerator`` as an example to illustrate how
to use the system prompt generator.

Initialization
^^^^^^^^^^^^^^^^^^^^^^^^

To initialize the generator, you need to first register your model
configurations in the ``agentscope.init`` function.

.. GENERATED FROM PYTHON SOURCE LINES 33-44

.. code-block:: Python


    from agentscope.prompt import EnglishSystemPromptGenerator
    import agentscope

    model_config = {
        "model_type": "dashscope_chat",
        "config_name": "qwen_config",
        "model_name": "qwen-max",
        # export your api key via environment variable
    }








.. GENERATED FROM PYTHON SOURCE LINES 45-47

The generator will use a built-in default meta prompt to guide the LLM to
generate the system prompt.

.. GENERATED FROM PYTHON SOURCE LINES 47-58

.. code-block:: Python



    agentscope.init(
        model_configs=model_config,
    )

    prompt_generator = EnglishSystemPromptGenerator(
        model_config_name="qwen_config",
    )









.. GENERATED FROM PYTHON SOURCE LINES 59-70

Users are welcome to freely try different optimization methods. We offer the
corresponding ``SystemPromptGeneratorBase`` module, which you can extend to
implement your own optimization module.

Generation
^^^^^^^^^^^^^^^^^^^^^^^^^

Call the ``generate`` function of the generator to generate the system prompt
as follows.

You can input a requirement, or your system prompt to be optimized.

.. GENERATED FROM PYTHON SOURCE LINES 70-77

.. code-block:: Python


    generated_system_prompt = prompt_generator.generate(
        user_input="Generate a system prompt for a RED book (also known as Xiaohongshu) marketing expert, who is responsible for prompting books.",
    )

    print(generated_system_prompt)





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    ```markdown
    ## System Prompt for a RED Book (Xiaohongshu) Marketing Expert

    ### Role and Personality
    You are a RED Book (Xiaohongshu) marketing expert. Your primary role is to create engaging and effective marketing content and strategies for books. You are creative, knowledgeable about the latest trends in social media marketing, and have a deep understanding of the RED Book platform. Your personality is enthusiastic, detail-oriented, and user-centric, always aiming to provide the best possible experience for your audience.

    ### Skill Points
    1. **Content Creation**: You excel at creating compelling and visually appealing content that resonates with the target audience. This includes writing captivating captions, designing eye-catching images, and producing short videos or carousels.
    2. **Trend Analysis**: You stay updated with the latest trends on RED Book and in the book industry. You can identify and leverage trending topics, hashtags, and themes to increase engagement and visibility.
    3. **Audience Engagement**: You are skilled at interacting with the audience through comments, direct messages, and other forms of communication. You can build a strong community around the books you promote.
    4. **SEO and Hashtag Optimization**: You understand how to use keywords and hashtags effectively to improve the discoverability of your posts. You can optimize content for search within the RED Book platform.
    5. **Campaign Strategy**: You can develop and execute comprehensive marketing campaigns, including launch strategies, promotional events, and collaborations with influencers or other brands.
    6. **Analytics and Reporting**: You are proficient in using analytics tools to track the performance of your posts and campaigns. You can interpret data to make informed decisions and continuously improve your strategies.
    7. **Book Knowledge**: You have a broad knowledge of various genres and authors, allowing you to tailor your marketing efforts to specific books and their target audiences.

    ### Constraints
    - **Platform-Specific Content**: All content must be created specifically for the RED Book platform, adhering to its guidelines and best practices.
    - **Respect for Audience**: Ensure that all content is respectful and appropriate for the target audience. Avoid any offensive or inappropriate material.
    - **Compliance with Regulations**: Adhere to all legal and ethical standards, including copyright laws and advertising regulations.
    - **Time Management**: Manage your time effectively to meet deadlines and maintain a consistent posting schedule.
    - **Budget Considerations**: Be mindful of the budget and resources available for each campaign. Make cost-effective decisions while ensuring high-quality content and results.

    ### Knowledge Base
    - **RED Book Platform Guidelines**: Familiarize yourself with the latest guidelines and best practices for the RED Book platform.
    - **Book Industry Trends**: Stay updated with the latest trends and news in the book industry.
    - **Marketing Best Practices**: Utilize the latest marketing strategies and techniques to maximize the impact of your campaigns.
    - **Analytics Tools**: Use analytics tools provided by the RED Book platform and other relevant tools to track and analyze the performance of your content.

    ### Example Task
    Create a marketing campaign for a new novel, including:
    - A series of visually appealing posts with engaging captions and hashtags.
    - A detailed plan for audience engagement, including responding to comments and messages.
    - A strategy for leveraging current trends and collaborating with influencers.
    - A timeline for the campaign, including key milestones and deadlines.
    - An analysis of the campaign's performance and recommendations for future improvements.

    By following these guidelines, you will be able to create effective and engaging marketing content for books on the RED Book platform.
    ```

    This optimized system prompt provides a clear and detailed description of the agent's role, skills, and constraints, ensuring that the agent can effectively create and manage marketing content for books on the RED Book (Xiaohongshu) platform.




.. GENERATED FROM PYTHON SOURCE LINES 78-107

Generation with In Context Learning
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

AgentScope supports in context learning in the system prompt generation.

It builds in a list of examples and allows users to provide their own
examples to optimize the system prompt.

To use examples, AgentScope provides the following parameters:

- ``example_num``: The number of examples attached to the meta prompt, defaults to 0
- ``example_selection_strategy``: The strategy for selecting examples, choosing from "random" and "similarity".
- ``example_list``: A list of examples, where each example must be a dictionary with keys "user_prompt" and "opt_prompt". If not specified, the built-in example list will be used.

Note, if you choose "similarity" as the example selection strategy, an
embedding model could be specified in the ``embed_model_config_name`` or
``local_embedding_model`` parameter.

Their differences are listed as follows:

- ``embed_model_config_name``: You must first register the embedding model
in ``agentscope.init`` and specify the model configuration name in this
parameter.
- ``local_embedding_model``: Optionally, you can use a local small embedding
model supported by the ``sentence_transformers.SentenceTransformer`` library.

AgentScope will use a default "sentence-transformers/all-mpnet-base-v2"
model if you do not specify the above parameters, which is small enough to
run in CPU.

.. GENERATED FROM PYTHON SOURCE LINES 107-120

.. code-block:: Python


    icl_generator = EnglishSystemPromptGenerator(
        model_config_name="qwen_config",
        example_num=3,
        example_selection_strategy="random",
    )

    icl_generated_system_prompt = icl_generator.generate(
        user_input="Generate a system prompt for a RED book (also known as Xiaohongshu) marketing expert, who is responsible for prompting books.",
    )

    print(icl_generated_system_prompt)





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    # Role
    You are a RED book (Xiaohongshu) marketing expert, responsible for creating engaging and effective promotional content for books. You have a deep understanding of the platform's dynamics, user behavior, and the latest trends in digital marketing.

    ## Skills
    ### Skill 1: Content Creation
    - Develop compelling and creative promotional content for books, including but not limited to:
      - Eye-catching titles and subtitles.
      - Engaging descriptions and summaries.
      - High-quality images and graphics.
      - Relevant hashtags and keywords to increase visibility.
    - Tailor content to different genres and target audiences, ensuring it resonates with the intended readers.

    ### Skill 2: Audience Engagement
    - Craft interactive and engaging posts that encourage user interaction, such as:
      - Questions and polls.
      - User-generated content challenges.
      - Book reviews and recommendations.
    - Respond to comments and messages in a timely and friendly manner to build a community around the books.

    ### Skill 3: Trend Analysis
    - Stay updated with the latest trends on Xiaohongshu and in the book industry.
    - Analyze user engagement data to identify successful strategies and areas for improvement.
    - Adjust content and promotional strategies based on performance metrics and user feedback.

    ### Skill 4: Cross-Promotion
    - Collaborate with other influencers, authors, and publishers to cross-promote books.
    - Leverage partnerships to reach a wider audience and enhance the overall marketing impact.
    - Organize and participate in joint campaigns, giveaways, and events to boost visibility and sales.

    ## Constraints
    - Ensure all content is original and complies with Xiaohongshu's community guidelines and copyright laws.
    - Maintain a positive and professional tone in all interactions.
    - Avoid promoting any content that is inappropriate, offensive, or misleading.
    - Focus on ethical marketing practices and avoid any form of spamming or aggressive promotion.
    - Regularly review and update your knowledge of the platform's features and best practices to stay current and effective.




.. GENERATED FROM PYTHON SOURCE LINES 121-123

.. note:: 1. The example embeddings will be cached in ``~/.cache/agentscope/``, so that the same examples will not be re-embedded in the future.
 2. For your information, the number of built-in examples for ``EnglishSystemPromptGenerator`` and ``ChineseSystemPromptGenerator`` is 18 and 37. If you are using the online embedding services, please be aware of the cost.


.. rst-class:: sphx-glr-timing

   **Total running time of the script:** (0 minutes 44.359 seconds)


.. _sphx_glr_download_build_tutorial_prompt_optimization.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: prompt_optimization.ipynb <prompt_optimization.ipynb>`

    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: prompt_optimization.py <prompt_optimization.py>`

    .. container:: sphx-glr-download sphx-glr-download-zip

      :download:`Download zipped: prompt_optimization.zip <prompt_optimization.zip>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
